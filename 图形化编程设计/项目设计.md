## 数据类型

卡牌表示(卡牌组)
- 一张张卡牌
  - 卡牌需要兼顾有可扩展性
  - 卡牌id
  - 卡牌效果
    - **如何描述卡牌效果?**
    - 如何规定卡牌结算?
    - !图形化函数结算所有的卡牌
    - **可扩展卡牌**

- 区域
    - 手牌区域
    - 银行区域
    - 牌库区域
    - 牌堆区域
    - **可扩展区域**


- ~~时机定义和扳机定义~~ 使用响应序列
  - 注册函数
  - 自定义事件?
  - 事件集
    - 回合开始
      - 结算注册函数
    - 回合中
      - ~~交换银行时~~
      - **打出某牌**
      - 卡牌转移
        - 卡牌进入区域
        - 卡牌离开区域(?)
      - ~~(玩家)执行(二白/)~~
      - **触发他人的特殊打出效果**
      - 见到某牌(?)
    - 回合结束
      - 抽牌
      - 摸到炸弹
      - 死亡/弃牌

    - 一轮
    - 整场游戏


## 问题研究

卡牌定义: 一张张定义
- 打出某二连卡牌视作打出一个\[卡牌1,卡牌2\]
  - 坏处
    - 可能会出现如index error的情况
    - 编程需要加数目索引和取值(图形化运算能力?)
  - 好处
    - 可以借此创建无限的卡牌组合

## 游戏流程

游戏开始
- 选择英雄/自定义英雄
- 摸牌(系统直接帮忙摸)(此处考虑:摸到炸弹后放回or直接无炸弹摸牌)
- 选出白板猫作为银行

其他人回合
- 其他人打出卡牌后,会轮询每个玩家是否要打出响应(类似于三国杀)
  - 无法响应的玩家也有回合结束计时条,但倾向于2s内结束掉
  - 响应可以嵌套子序列如
    >1打出功能牌 2跳过 3打出否决 
    >
    >以3打出的否决接着创建一次序列, 4跳过(不否决3的否决) 1跳过 2跳过 子序列结束
    >
    >继续结算1创建功能牌的子序列 此时4依旧可以响应1的功能牌
  - 响应可以处理(小猫钓鱼)
  - 使回合结束也会创建一个响应序列(处理拾荒)
  - 响应序列可以处理帮助(其他玩家都跳过而某玩家不跳过)
  - 响应序列理应分为无声响应序列和显式响应序列
    - 无声响应序列处理(拾荒, 帮助)等等效果明确,不会因为无声而提供信息的序列, (特点是没有决策的空间, 倒计时结束后必须要选择一个交出)
    - **响应序列是否无声可以让玩家自定??**
    - 无论是有声还是无声响应序列都可以开启子响应序列
    - 例如帮助会开启响应序列1:玩家b失去某手牌,接着开启序列2:玩家a得到某手牌

自己回合
- 以其他人的\[回合结束\]作为自己回合开始的标志
- 出牌
  - 如何确定玩家将要进行的行动?(如出一白究竟是想要拆除掉一个人的陷阱或是一个人的钓饵?)**指定行动和指定区域**
  - 目标选择是在什么时候? (如何促进区域内的目标选择?)
    - 自定区域无法被选为目标,只能在出牌前点击"特殊动作"
    - 自定行动无法被匹配识别,只能先点击自定行动(然后在传递框内拖入符合要求的牌 系统对这个传递框进行检查)
    - 系统定义的卡牌组合(单走攻击等)区分为定向和非定向
    - 定向卡牌: 拖入传递框,此时:传递框.执行事件=0,检测传递框内的卡牌是否与某种预置模式相匹配,更改传递框的执行事件, 接着, 等待设置执行的目标(目标理应是区域,且非自定义区域), 点击执行(传递框依次出发), 轮询结束, 传递框到达, 轮询结束, 效果触发, 

  - 自定义传递框
    - 如果要求是 出一张白+湮灭一张功能+和银行交换一张+给其他一个玩家一张牌 **此时传递框需要能够分为四个组件,并且四个组件要达到"一起匹配,一起出发"**
  
  - 自定义传递框匹配表达式

  - 区域互动效果
    - 自摸(int)数量卡牌 **注意,在线上,暗牌自摸和随机给没有任何区别**
    - 在(area)区域中的 满足(class1 or class2)的所有卡牌中自摸
    - 如何处理抉择操作?(弃掉人家2张或者是自己摸走一张?)
      - 考虑用传递框表达操作
      >\[操作1\[弃牌\[卡牌1,卡牌2\]\]\]
      >
      >\[操作2\[获得(转移至自己手牌中)\[卡牌1\]\]\] 

    - 如何处理多玩家操作?(选择一个玩家让他弃一张,另一位玩家弃两张)
      - 1,多玩家操作时, 操作名直接在指定操作区域时便加以区分(lor)